import{r as e,j as a,a as n,u as t,$ as r,b as o,m as s,S as i,C as l,K as u,c,d,F as E,E as m,e as p}from"./main.2a655075.js";function f({equation:e,setEquation:t,inline:r},o){const s=e=>{t(e.target.value)};return r&&o instanceof HTMLInputElement?a("span",{className:"EquationEditor_inputBackground",children:[n("span",{className:"EquationEditor_dollarSign",children:"$"}),n("input",{className:"EquationEditor_inlineEditor",value:e,onChange:s,autoFocus:!0,ref:o}),n("span",{className:"EquationEditor_dollarSign",children:"$"})]}):a("div",{className:"EquationEditor_inputBackground",children:[n("span",{className:"EquationEditor_dollarSign",children:"$$\n"}),n("textarea",{className:"EquationEditor_blockEditor",value:e,onChange:s,ref:o}),n("span",{className:"EquationEditor_dollarSign",children:"\n$$"})]})}var q=e.exports.forwardRef(f);function g({equation:a,inline:f,nodeKey:g}){const[h]=t(),[x,N]=e.exports.useState(a),[_,S]=e.exports.useState(!1),v=e.exports.useRef(null),C=e.exports.useCallback((e=>{S(!1),h.update((()=>{const a=r(g);o(a)&&(a.setEquation(x),e&&a.selectNext(0,0))}))}),[h,x,g]);return e.exports.useEffect((()=>{_||x===a||N(a)}),[_,a,x]),e.exports.useEffect((()=>_?s(h.registerCommand(i,(e=>{const a=document.activeElement;return v.current!==a&&C(),!1}),l),h.registerCommand(u,(e=>{const a=document.activeElement;return v.current===a&&(C(!0),!0)}),l)):h.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=c();return d(e)&&e.has(g)&&1===e.getNodes().length}))&&S(!0)}))),[h,g,C,_]),n(E,{children:_?n(q,{equation:x,setEquation:N,inline:f,ref:v}):n(m,{onError:e=>h._onError(e),fallback:null,children:n(p,{equation:x,inline:f,onDoubleClick:()=>S(!0)})})})}export{g as default};
