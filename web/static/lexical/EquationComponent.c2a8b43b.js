import{r as e,j as n,a as t,u as a,$ as r,b as o,m as s,S as i,C as l,K as u,c,d,F as E,E as m,e as p}from"./main.00ecd330.js";function f({equation:e,setEquation:a,inline:r},o){const s=e=>{a(e.target.value)};return r&&o instanceof HTMLInputElement?n("span",{className:"EquationEditor_inputBackground",children:[t("span",{className:"EquationEditor_dollarSign",children:"$"}),t("input",{className:"EquationEditor_inlineEditor",value:e,onChange:s,autoFocus:!0,ref:o}),t("span",{className:"EquationEditor_dollarSign",children:"$"})]}):n("div",{className:"EquationEditor_inputBackground",children:[t("span",{className:"EquationEditor_dollarSign",children:"$$\n"}),t("textarea",{className:"EquationEditor_blockEditor",value:e,onChange:s,ref:o}),t("span",{className:"EquationEditor_dollarSign",children:"\n$$"})]})}var q=e.exports.forwardRef(f);function g({equation:n,inline:f,nodeKey:g}){const[h]=a(),[x,N]=e.exports.useState(n),[_,S]=e.exports.useState(!1),v=e.exports.useRef(null),C=e.exports.useCallback((e=>{S(!1),h.update((()=>{const n=r(g);o(n)&&(n.setEquation(x),e&&n.selectNext(0,0))}))}),[h,x,g]);return e.exports.useEffect((()=>{_||x===n||N(n)}),[_,n,x]),e.exports.useEffect((()=>_?s(h.registerCommand(i,(e=>{const n=document.activeElement;return v.current!==n&&C(),!1}),l),h.registerCommand(u,(e=>{const n=document.activeElement;return v.current===n&&(C(!0),!0)}),l)):h.registerUpdateListener((({editorState:e})=>{e.read((()=>{const e=c();return d(e)&&e.has(g)&&1===e.getNodes().length}))&&S(!0)}))),[h,g,C,_]),t(E,{children:_?t(q,{equation:x,setEquation:N,inline:f,ref:v}):t(m,{onError:e=>h._onError(e),fallback:null,children:t(p,{equation:x,inline:f,onDoubleClick:()=>S(!0)})})})}export{g as default};
