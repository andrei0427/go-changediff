{% include "partials/base/base.html" %}

<main class="mx-auto flex w-full max-w-7xl flex-auto flex-col justify-center px-6 py-24 sm:py-64 lg:px-8">
    <p class="text-base font-semibold leading-8 text-blue" id="code">{{Code}}</p>
    <h1 class=" mt-4 text-3xl font-bold tracking-tight text-gray-900 sm:text-5xl">{{Message}}</h1>
    <div class="mt-10">
        <a href="/dashboard" class="text-sm font-semibold leading-7 text-blue"><span aria-hidden="true">&larr;</span>
            Back
            to Dashboard</a>
    </div>
</main>

<script type="text/javascript">
    const codeElm = document.getElementById("code");

    if (codeElm) {
        const code = codeElm.innerHTML;

        if (code === "401") {
            document.cookie = '';

            sb.auth.getSession().then(({ data, error }) => {
                if (data.session != null) {
                    handleUserAuthenticated(data.session.access_token);
                } else {
                    handleLogout();
                }
            });
        }
    }
</script>