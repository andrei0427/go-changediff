<li>
  <div class="relative pb-8">
    {% if !isLast(a, activity) %}
    <span
      class="absolute left-5 -top-0.5 -ml-px h-full w-0.5 bg-gray-200"
      aria-hidden="true"
    ></span>
    {%endif%}
    <div class="relative flex items-start space-x-3">
      <div class="relative">
        <img
          class="flex h-10 w-10 items-center justify-center rounded-full bg-gray-400 ring-8 ring-white"
          src="{%if a.WhoPictureUrl %}{{ CDNUrl(a.WhoPictureUrl) }}{%else%}/favicon.png{%endif%}"
          alt=""
        />
        <span
          class="absolute -bottom-1 -right-2 rounded-xl bg-white px-0.5 py-px"
        >
          <svg
            class="h-5 w-5 text-gray-400"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M10 2c-2.236 0-4.43.18-6.57.524C1.993 2.755 1 4.014 1 5.426v5.148c0 1.413.993 2.67 2.43 2.902.848.137 1.705.248 2.57.331v3.443a.75.75 0 001.28.53l3.58-3.579a.78.78 0 01.527-.224 41.202 41.202 0 005.183-.5c1.437-.232 2.43-1.49 2.43-2.903V5.426c0-1.413-.993-2.67-2.43-2.902A41.289 41.289 0 0010 2zm0 7a1 1 0 100-2 1 1 0 000 2zM8 8a1 1 0 11-2 0 1 1 0 012 0zm5 1a1 1 0 100-2 1 1 0 000 2z"
              clip-rule="evenodd"
            />
          </svg>
        </span>
      </div>
      <div class="min-w-0 flex-1">
        <div>
          <div class="text-sm">
            <span class="font-medium text-gray-900">{{a.Who}}</span>
          </div>
          <p class="mt-0.5 text-sm text-gray-500">
            Commented {{formatDuration(a.CreatedOn)}}

            <button
              class="text-emerald"
              id="reply-{{a.ID}}"
              onclick="document.querySelector('#comment-container-{{a.ID}}')?.classList.remove('hidden'); event.target.classList.add('hidden');"
            >
              Reply
            </button>
          </p>

          {%if a.CommentActivity.ReplyCount%}
          <button
            hx-get="/admin/roadmap/post/activity/{{postId}}/{{a.ID}}"
            hx-swap="afterbegin"
            hx-target="#reply-container-{{a.ID}}"
            hx-on::after-request="document.querySelector('#comment-container-{{a.ID}}')?.classList.remove('hidden'); document.querySelector('#reply-{{a.ID}}').classList.add('hidden');"
            class="mt-0.5 text-sm italic text-emerald"
          >
            View {{a.CommentActivity.ReplyCount}} replies
          </button>
          {%endif%}
        </div>
        <div class="mt-2 text-sm text-gray-700">
          <p>{{a.CommentActivity.Comment}}</p>
        </div>
      </div>
    </div>

    <ul id="reply-container-{{a.ID}}" class="pl-16 pt-4" role="list"></ul>

    <div id="comment-container-{{a.ID}}" class="hidden">
      {% include "partials/components/roadmap/post_comment_form.html" %}
    </div>
  </div>
</li>
